[TOC]

# Linux（Ubuntu）

# 1，简介

## 1.这是啥

很叼的操作系统内核。

可以在这个内核上搞出很多玩意。

比如个人桌面系统（windows之类的），不过这里Linux不擅长。

还有服务器与嵌入式领域，这玩意就算是绝对的老大。

稳定，高效，可以根据需求剪裁或补建，尤其她免费！

## 2.安装

这里用WSL（Windows自带的跑Linux的玩意）装乌班图来玩它。

这里是win11。

先去控制面板，进程序和功能，点启用或关闭Windows功能，勾适用于Linux的Windows子系统。

在看看任务管理器里的性能，看看CPU虚拟化是不是已启用，没有就要去BIOS打开。

再去微软商店，找Ubuntu，翻个最新的装。

然后win+r输入services.msc进去，找找有没有Host Compute Service (vmcompute) 和LxssManager。

启动这俩玩意。

要是干脆没有这俩玩意就在power shell执行：

```cmd
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
```

```cmd
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```

然后重启电脑。

然后跑下面两句，为了装WSL和Ubuntu。

```cmd
wsl --update
```

```cmd
wsl --install -d Ubuntu
```

要是显示已成功安装分发就算是好了。

最后执行最后一句启动Ubuntu。

```cmd
wsl -d Ubuntu
```

## 3.把密码忘了

命令行直接输入：

```cmd
wsl -u root
```

直接用root身份进系统。

进入输入：

```cmd
passwd
```

跟着提示直接改密码。

这就可以了：）

# 2，基本

## 1.目录

和windows树状的，有多个顶层目录（盘）不同。

Linux只有一个根目录`/`。

根目录下有一堆规定的目录。

Linux的路径表述类似于`/a/b.txt`

表示根目录下的a文件夹内有一个txt文件b。

而用户的个人账户就在`/home/<用户名>`下，每个登录的用户都会在这个home里有自己的文件夹。

最后，`~`代表当前用户的个人文件夹。

如张三登录了系统，那么`~`就指向`/home/张三`。

李四登录了系统，那么`~`就指向`/home/李四`。

## 2.路径

### 相对路径

以当前所在工作目录为起点。

如需要从用户目录跳到Desktop就是`cd /home/用户名/Desktop`。

### 绝对路径

以根目录为起点。

如需要从用户目录跳到Desktop就是`cd Desktop`。

### 层级路径符

`.`表示当前目录，如`cd Desktop`等价于`cd ./Desktop`。

`..`表示上级目录，如当前在`/home/用户名/Desktop`，`cd ../`就会去到`/home/用户名`。

`~`表示home目录，就是用户目录，`cd ~/Desktop`就会到`/home/用户名/Desktop`。

## 3.命令

虽然Linux也有图形化系统，但都来学Linux了，当然还是要用命令行。

Linux中的命令一个基本格式：`command [-options] [parameter]`。

分别为命令名，命令选项和命令参数。

如`ls -l /home/itheima`就是以列表形式显示/home/itheima内的内容。

### ls——展示指定目录

> ls [-a -l -h] [路径]

用于列出指定目录下的内容。

不携带任何选项与参数，默认平铺列出当前所在目录下所有东西。

-a显示**包括隐藏文件**（文件名前带点）的所有文件。

-l把输出改为**列表形式**展示，展示的信息也会多一点。

-al可以并用，效果就是两种参数和合并形式。

-lh必须并用，单个-h没用，用于在-l的基础上把文件大小改成是人看的格式。

### cd——切换目录

> cd [路径]

用于切换工作目录。

不带路径默认转到用户目录（就是`/home/用户名`）。

### pwd——展示当前目录

> pwd

用于显示当前工作目录。

### mkdir——创建目录

> mkdir [-p] 路径

用于在指定位置创建新的目录（就是windows里面的文件夹）。

-p用于补全创建不存在的父级目录。

如目前工作目录为用户目录下，执行`mkdir -p test_1/test_2`就会把中间不存在的test_1自动创建出来。

### touch——创建文件

> touch 路径

用于在指定位置创建文件。

创建文件时记得加上文件格式后缀。

### cat——查看文件全部内容

> cat 路径

用于查看文件内容。

指向文件时也记得把文件格式后缀加上写全。

### more——分页查看文件内容

> more 路径

用于查看文件内容。

cat会一次性全部显示完，这个在文件内容太长时会分页显示，左下角会显示展示量的百分比。

空格翻页，q退出。

### cp——复制目录或文件

> cp [-r] 参数1 参数2

用于复制指定目录或文件到指定地方。

参数1表示目录或文件的路径，参数2表示目标路径。

-r表示在复制目录时使用递归，反正就是复制文件夹时必须加这玩意。

且复制时，新的目录或文件名不能是一样的，所以参数2的目录或文件名记得改一改。

### mv——移动目录或文件

> mv 参数1 参数2

用于移动指定目录或文件到指定的地方。

参数1表示目录或文件的路径，参数2表示目标路径。

若移动目标不存在，被移动的目标会被改名为参数2的名称。

如` mv testTXT.txt testTXT2.txt`，若testTXT2.txt不存在，那么testTXT.txt会直接被改名成testTXT2.txt。

### rm——删除目录或文件

> rm  [-r -f] 参数1 参数2... 参数n

用于删除指定目录或文件夹。

-r同样是在删除目录是才要加。

-f用于强制删除不给你弹提示（但是提示一般root管理员才会弹，普通用户删除时一般也不会弹，故基本没用）。

剩下的一堆参数全都是要删除的目录或文件路径，空格隔开就行。

参数除了直接给路径，也能用通配符。

如`*`用于包含任意内容。

`test*`匹配任何以test开头的。

`*test`匹配任何以test结尾的。

`*test*`匹配任何包含test的。

### which——查找命令执行文件

> which 命令名

命令就是一些可执行程序嘛（windows里面的.exe）。

这玩意就是找找这些.exe在哪里。

### find——按名字查找文件

> find 起始路径 -name "目标文件名"

就是用于查找某个文件在哪里。

查询文件后缀也要加上。

目标文件名也能用通配符匹配。

`*`用于包含任意内容。

`test*`匹配任何以test开头的。

`*test`匹配任何以test结尾的。

`*test*`匹配任何包含test的。

### find——按大小查找文件

> find 起始路径 -size + | -n[kMG]

也是用于查找文件的。

不过就是另一种查找方法。

+或-表示大于或小于。

n表示一个实际数字。

kMG表示单位，kb，MB，GB。

这个命令看起来有点杂。

举个例子：`find /home -size +10k`表示查找home目录下大小小于10kb的文件或目录。

### grep——过滤文件

> grep [-n] 关键字 文件路径

可以从文件中通过关键字过滤内容。

-n表示在结果中显示匹配的行数。

### wc——文件内容统计

> wc [-c -m -l -w] 文件路径

-c表示统计bytes。

-m表示统计字符。

-l表示统计行数。

-w表示统计单词。

### echo——输出至命令行

> echo 内容

直接在命令行输出点文本啥的。

### `——转义为命令

> echo \`pwd\`

一般配合echo使用。

如直接输入`echo pwd`，系统会直接喷pwd三个字母，而不是执行pwd这个命令。

改成echo \`pwd\`就可以把pwd识别为命令，然后echo就输出命令的结果了。

### 管道符

> |

用于将左边命令的结果作为右边命令的输入。

如`ls | find -name test*`意为将ls的展示结果作为右边查询的数据源。

在左边提供的列表中查询test开头的文件或目录。

### > / >>——重定向符

> ？？？

一个箭头用于将左边命令的结果覆盖到右边的指定文件中。

两个箭头用于将左边命令的结果追加到右边的指定文件中。

### tail——查看文件末尾内容

> tail [-f -num] 文件路径

-f表示持续跟踪（如开两个命令行，一个tail -f xx文件，另一个修改同一个文件，那么前一个命令行会持续展示最新的）。

-num表示查看几行（默认10行）。

## 4.vi / vim编辑器

Linux中一个非常常用的文本编辑器。

vim就是vi的plus版。

### 三种模式

- 命令模式：
  - 所有输入均试图解释为命令。
  - 不能编辑文件内容。
- 输入模式：
  - 专用于编辑文件内容。
- 底线命令模式：
  - 以`:`开头。
  - 用于文件的保存或退出等操作。

### 开始编辑

`vim 文件路径`就可以开始编辑指定的文件了。

若目标文件不存在，那么就会创建一个新的文件进行编辑。

进入后直接会进入命令模式。

输入`i`进入输入模式。

按`esc`退回命令模式（方向键移动光标，PgUp/Dn翻页，/搜索，n搜索下一条，N搜索上一条）。

按`:`进入底线命令模式（:wq保存并退出，:q直接退出，:q!强制退出，:w仅保存）。

先记着这点能用先。

# 3，用户 / 权限

## 1.root用户

超级管理员，基本上啥都能干。

普通用户（itheima）出了自己的用户目录基本就剩读取和执行权限，修改被拿走了。

root就可以在任何地方做任何事（让它删了自己似乎也是可以的，windows就不行）。

### 切换与退回用户

用`su [-] [用户名]`就可以切换用户。

-表示切换后加载环境变量（建议加上）。

用`exit`可以退回到上一个用户。

root切换到别的用户随便切。

某个用户切到非root用户也是随便切。

普通用户切到root用户需要输密码。

### sudo认证

怕一直捏着root会玩坏点啥。

可以用这个缀子让某条命令以root权限运行。

直接`sudo 命令`就行。

不过用户本身又不具有赋予sudo的权利，所以又要先赋予用户赋予sudo的权限，用户才能赋予命令sudo认证。

### 赋予sudo认证权限

当然还是要回到root身份。

使用`visudo`命令，理应会进入vim页面打开/etc/sudoers文件。

在文件的最末尾添加`itheima ALL=(ALL)	NOPASSWD: ALL`，然后保存退出。

现在理应普通用户就有赋予命令sudo认证的权限了。

同样删掉这行这个权限就可以收回了。

## 2.用户与用户组

Linux里面可以有好多用户。

可以把一些用户编进一组。

一个用户可以同时存在于多个组。

各种权限可以分为针对单个用户的，当然还有一个针对用户组的。

### 用户

#### 查看用户

`getent passwd`用于查看系统中所有的用户。

检出来的一堆玩意也是有显示规定的。

一般就是：`名字:密码(xxx):用户ID:组ID:描述信息(没用):HOME目录:执行终端(默认Bash)`。

#### 创建用户

root执行`useradd [-g -d] 用户名`就能创建一个用户了。

- -g用于指定用户的所属用户组（若试图加入不存在的组，这个组会被自动创建）。
- -d用于分配用户的home路径（不指定home会默认创建`/home/用户名`）。

#### 删除用户

root执行`userdel [-r] 用户名`就能删除一个用户了。

- -r用于删除用户时一并删除它的home目录（不加那么它的home目录就会被保留）。

#### 查看所在组

root执行`id [用户名]`就能查看用户所属的用户组了。

- 不指定用户名默认查看当前操作的用户。

#### 修改所在组

root执行`usermod -aG 用户组名 用户名`就能修改用户所属的用户组了。

- -a表示把用户加入新的组，但不要退出旧的组。
- -G表示把用户加入到哪个组。

### 用户组

#### 查看用户组

`getent group`用于查看系统中所有的用户组。

检出来的一堆玩意也是有显示规定的。

一般就是：`组名:组认证(一般显示x):组ID`。

#### 创建用户组

root执行`groupadd 用户组名`就能创建一个用户组了。

#### 删除用户组

root执行`groupdel 用户组名`就能删除一个用户组了。

## 3.权限控制

如使用`ls -l`展示文件与目录后，前面不是会喷出一大段莫名其妙的用空格分开的玩意嘛。

一行信息，从左往右。

- 第一段是权限控制信息。
- 第二段是所属用户。
- 第三段是所属用户组。

### 权限控制信息

就是第一段的内容。

它又分成四段。

- 第一段（一位）：
  - -或d或l：文件或文件夹或软连接。
- 第二段（三位，所属用户对此的权限）：
  - r或-：读取或无权限。
  - w或-：写入或无权限。
  - x或-：执行或无权限。
- 第三段（三位，所属用户组对此的权限）：
  - r或-：读取或无权限。
  - w或-：写入或无权限。
  - x或-：执行或无权限。
- 第四段（三位，其它用户对此的权限）：
  - r或-：读取或无权限。
  - w或-：写入或无权限。
  - x或-：执行或无权限。

### rwx权限

就是上面反复出现的。

- r：
  - 读取。
  - 对于文件：查看文件内容。
  - 对于目录：查看目录成员，如ls命令。
- w：
  - 修改。
  - 对于文件：修改文件内容。
  - 对于目录：修改目录内部成员，如在内创建，删除或改名等。
- x：
  - 执行。
  - 对于文件：可以将文件作为程序执行。
  - 对于目录：可以设定为工作目录，如cd命令。

### chmod——修改权限信息

> chmod [用户类别] [+/-/=] [权限] 文件

用于修改文件或目录的权限信息。

-R表示对目录内的所有成员均应用相同的修改。

用户类别：

- u：文件所有者。
- g：所属组。
- o：其他用户。
- a：所有。

操作符：

- +：添加权限。
- -：删除权限。
- =：覆盖权限。

这命令挺乱。

如`chmod u+rwx test`就是给这个目录的所有者完全权限。

还有再简化的数字版（感觉更乱了）。

- 0：无权限（---）
- 1：仅执行（--x）
- 2：仅修改（-w-）
- 3：仅修改与执行（-wx）
- 4：仅读取（r--）
- 5：仅读取与执行（r-x）
- 6：仅读取与修改（rw-）
- 7：全部权限（rwx）

然后前面讲了权限控制信息除去第一段的文件目录标识，后面还有三段嘛。

用三个数字就能代表剩余的三段权限了。

如`chmod 700 test`就是给目录所有者完全权限，目录所属组与其它用户啥都不能干。

### chown——修改所属用户或用户组

> chown [-c -f -v -R --reference=文件地址] [用户名] [:用户组名] 文件或目录地址

用于修改文件或目录的所属用户或用户组（似乎只能是root才能用）。

-c表示显示修改信息（就会补一句changed ownership of 'xxx' from xxx to xxx）。

-R表示递归修改子目录或文件，把它们一家都改掉。

--reference=表示修改为与某个文件或目录相同。

这个也是挺乱的。

反正最基本的修改操作就是 `chown 用户名 文件或目录地址` 或  `chown :用户组名 文件或目录地址`。

用户名和用户组名写了哪个就会应用哪个，都写就都应用。

还有最后一个最长的参数就是`chown --reference=test test.txt`，把test的用户与用户组改成和test.txt一样。

# 4，奇技淫巧

## 1.快捷键

### ctrl+C——强制终止

命令写一半写错了？

执行一半想停下？

ctrl+C可以打断所有的输入或执行，还你你个干净的等候输入状态。

### ctrl+D——退出或登出

用来退出某些页面（我也不知道能退出啥页面）。

或用来退出当前用户登录。

vim还是要用它自己的命令退，这个对vim没用的。

### history——检查输入历史

翻翻旧账，看看自己都干了些什么。

会显示所有命令或输入（乱敲也会记录），反正只要写了并回车就会被记录。

一般配合管道符与grep过滤效果最好。

### !——回溯匹配并执行

很™吓人，少用。

如`!r`就会在历史输入中（就是history搜出来的那些玩意）从最近输入开始匹配。

若出现某条输入的开头字母也是r，那么不管这条输入是啥都会被试着执行。

### ctrl+R——回溯匹配

也挺吓人。

按ctrl+R后随便输入点啥，系统会试图在历史输入里面搜索匹配输入（包含匹配）。

不过搜到匹配输入后再回车才会执行，键盘右方向键可以把这个输入盖进当前输入栏。

反正这俩回溯都尽量不用就是了。

### ctrl+A——光标跳至输入栏开头

字面意思嘛。

### ctrl+E——光标跳至输入栏末尾

没啥好讲的嘛。

### ctrl+←——光标左跳一个单词

偷偷懒嘛。

### ctrl+→——光标右跳一个单词

这四个不会看不懂吧。

### ctrl+L——清屏

清空屏幕中的所有东西。

就孤零零剩一个输入栏和一闪一闪的光标。

## 2.软件管理

### apt——包管理器

内置的，就是用来安装，卸载和搜索软件的。

Linux的应用商店罢了。

记得要root身份和联网。

- apt update：刷新数据库（刷新商店），安装或升级软件前建议跑一下整个最新版。
- apt upgrade -y：升级所有软件到最新版（不删除软件包）。
- apt install <包名>：安装软件包。
- apt remove <包名>：删除软件包（保留配置文件）。
-  apt purge <包名>：卸载软件包（配置文件也得死）。
- apt search <包名>：搜索软件包（看看商店里也没有这玩意）。
- apt show <包名>：显示包信息（版本，依赖啥的）。
- apt list --installed：列出也安装软件。

### systemctl——系统管理器

管理系统服务和系统状态的玩意。

- 管理服务：
  - 查看某个服务状态：
  
    ```cmd
    systemctl status ssh
    ```
  - 启动服务（立即生效）：
  
    ```cmd
    systemctl start ssh
    ```
  
  - 停止服务：
  
    ```cmd
    systemctl stop ssh
    ```
  
  - 重启服务：
  
    ```cmd
    systemctl restart ssh
    ```
  
  - 重新加载配置（不重启进程）：
  
    ```cmd
    systemctl reload ssh
    ```
  
  - 设置服务开机自启：
  
    ```cmd
    systemctl enable ssh
    ```
  
  - 取消开机自启：
  
    ```cmd
    systemctl disable ssh
    ```
  
  - 查看所有服务的运行状态：
  
    ```cmd
    systemctl list-units --type=service
    ```
  
- 管理状态
  - 关机：
  
    ```cmd
    systemctl poweroff
    ```
  
  - 重启：
  
    ```cmd
    systemctl reboot
    ```
  
  - 休眠：
  
    ```cmd
    systemctl hibernate
    ```

注意这里的开机自启，关机，重启啥的均代表Ubuntu实例的状态，根主机windows没关系。

### ln——软链接

> ln -s 参数1 参数2

软连接就是用来将文件或目录链接到其它位置。

像windows的快捷方式？

-s表示要创建一个软链接。

前一个参数表示被链接的文件或目录。

后一个参数表示链接的目的地。

## 3.日期与时间

### date——检查系统时间

> date [-d] [格式化字符串]

用于查看当前系统时间。

-d表示按给定的字符串格式显示。

格式化字符串：

- %Y：2025
- %y：25
- %m：01-12
- %d：01-31
- %H：00-23
- %M：00-59
- %S：00-60
- %s：1970-01-01 00:00:00 UTC 起的秒数（时间戳）

### 修改时区
